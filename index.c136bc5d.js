var t=Array.from(document.querySelectorAll(".field-cell")),e={ArrowRight:[[t[0],t[1],t[2],t[3]],[t[4],t[5],t[6],t[7]],[t[8],t[9],t[10],t[11]],[t[12],t[13],t[14],t[15]]],ArrowLeft:[[t[3],t[2],t[1],t[0]],[t[7],t[6],t[5],t[4]],[t[11],t[10],t[9],t[8]],[t[15],t[14],t[13],t[12]]],ArrowDown:[[t[0],t[4],t[8],t[12]],[t[1],t[5],t[9],t[13]],[t[2],t[6],t[10],t[14]],[t[3],t[7],t[11],t[15]]],ArrowUp:[[t[12],t[8],t[4],t[0]],[t[13],t[9],t[5],t[1]],[t[14],t[10],t[6],t[2]],[t[15],t[11],t[7],t[3]]]},n=document.querySelector(".game-score"),r=document.querySelector(".start"),o=document.querySelector(".message-win"),s=document.querySelector(".message-lose"),a=document.querySelector(".message-start");function c(){var n=t.filter(function(t){return 1===t.classList.length}),r=Math.floor(Math.random()*n.length),o=2;Math.random()>=.9&&(o=4),n.length>1&&l(n[r],o),1!==n.length||(l(n[r],o),i(e.ArrowRight)||i(e.ArrowDown)||s.classList.remove("hidden"))}function i(t){return t.some(function(t){for(var e=0;e<3;e++)if(t[e].textContent===t[e+1].textContent)return!0})}function l(t,e){0===e?(t.className="field-cell",t.textContent=""):(t.className="field-cell",t.classList.add("field-cell--".concat(e)),t.textContent=e)}r.addEventListener("click",function(){r.classList.contains("start")?(a.classList.add("hidden"),r.classList.replace("start","restart"),r.textContent="Restart",c(),c()):(a.classList.remove("hidden"),o.classList.add("hidden"),s.classList.add("hidden"),r.classList.replace("restart","start"),t.forEach(function(t){return l(t,0)}),r.textContent="Start",n.textContent=0)});var d=["ArrowLeft","ArrowUp","ArrowRight","ArrowDown"];document.addEventListener("keydown",function(t){var r=d.find(function(e){return e===t.key});if(r){var s=e[r],a=!1;s.forEach(function(t){for(var e=3,r=-1,s=3;e>=0;e--){var c=t[e].textContent;c&&(c===r&&(l(t[s],2*r),l(t[e],0),c*=2,r=-1,e=s,a=!0,n.textContent=Number(n.textContent)+c,2048===c&&o.classList.remove("hidden")),e!==s?t[s].textContent&&e!==s-1?(l(t[s-1],c),l(t[e],0),s-=1,r=c,a=!0):t[s].textContent?(r=c,s=e):(l(t[s],c),l(t[e],0),r=c,a=!0):r=c)}}),a&&c()}});
//# sourceMappingURL=index.c136bc5d.js.map
